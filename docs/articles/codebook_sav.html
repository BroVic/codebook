<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Codebook example with SPSS dataset • codebook</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Codebook example with SPSS dataset">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">codebook</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.6.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/codebook.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/codebook_labelled_manual.html">Codebook example with manual labelling</a>
    </li>
    <li>
      <a href="../articles/codebook_nested_scale.html">Codebook example with nested scales</a>
    </li>
    <li>
      <a href="../articles/codebook_qualtrics.html">Codebook example with Qualtrics dataset</a>
    </li>
    <li>
      <a href="../articles/codebook_sav.html">Codebook example with SPSS dataset</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rubenarslan/codebook">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="codebook_sav_files/htmlwidgets-1.2/htmlwidgets.js"></script><script src="codebook_sav_files/jquery-1.12.4/jquery.min.js"></script><link href="codebook_sav_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="codebook_sav_files/datatables-binding-0.4/datatables.js"></script><link href="codebook_sav_files/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="codebook_sav_files/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="codebook_sav_files/dt-core-1.10.16/js/jquery.dataTables.min.js"></script><script src="codebook_sav_files/jszip-1.10.16/jszip.min.js"></script><script src="codebook_sav_files/pdfmake-1.10.16/pdfmake.min.js"></script><script src="codebook_sav_files/pdfmake-1.10.16/vfs_fonts.js"></script><link href="codebook_sav_files/dt-ext-buttons-1.10.16/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="codebook_sav_files/dt-ext-buttons-1.10.16/js/dataTables.buttons.min.js"></script><script src="codebook_sav_files/dt-ext-buttons-1.10.16/js/buttons.flash.min.js"></script><script src="codebook_sav_files/dt-ext-buttons-1.10.16/js/buttons.html5.min.js"></script><script src="codebook_sav_files/dt-ext-buttons-1.10.16/js/buttons.colVis.min.js"></script><script src="codebook_sav_files/dt-ext-buttons-1.10.16/js/buttons.print.min.js"></script><link href="codebook_sav_files/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="codebook_sav_files/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="codebook_sav_files/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="codebook_sav_files/selectize-0.12.0/selectize.min.js"></script><link href="codebook_sav_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet">
<script src="codebook_sav_files/crosstalk-1.0.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Codebook example with SPSS dataset</h1>
                        <h4 class="author">Ruben Arslan</h4>
            
            <h4 class="date">2018-08-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rubenarslan/codebook/blob/master/vignettes/codebook_sav.Rmd"><code>vignettes/codebook_sav.Rmd</code></a></small>
      <div class="hidden name"><code>codebook_sav.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">knit_by_pkgdown &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.retina"</span>))</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/panderOptions">panderOptions</a></span>(<span class="st">"table.split.table"</span>, <span class="ot">Inf</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/theme_get">theme_set</a></span>(ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_bw</a></span>())</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">warning =</span> <span class="ot">TRUE</span>, <span class="dt">message =</span> <span class="ot">TRUE</span>, <span class="dt">error =</span> <span class="ot">TRUE</span>, <span class="dt">echo =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw">library</span>(codebook)</a></code></pre></div>
<p>In this vignette, you can see how to use the metadata that is often already stored in SPSS and Stata files. It’s easy. All we need is the <code><a href="http://www.rdocumentation.org/packages/rio/topics/import">rio::import</a></code> function. For files with the right file extension, we can automatically pick the right way to import the data. Here, we’re downloading straight from the Open Science Framework, so we have to specify the file extension.</p>
<p>We select a subset of variables, just to keep it short. The data were shared by Emanuel Jauk in a project called <a href="https://osf.io/j4fcb/">How alluring are dark personalities? The Dark Triad and attractiveness in speed dating</a>.</p>
<p>Often, files imported from SPSS or Stata to R will not have their missings coded properly. Here, that is not the case, but if you find yourself with such a dataset, the <code>detect_missings</code> function makes it easy to recognise common ways to specify missing data (e.g. negative values, labelled values, 99/999).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">darktriad &lt;-<span class="st"> </span>rio<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rio/topics/import">import</a></span>(<span class="st">"https://osf.io/j4fcb/download"</span>, <span class="dt">format =</span> <span class="st">"sav"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(DG, sex, relStat, education, NPI_avg)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="cf">if</span> (<span class="op">!</span>knit_by_pkgdown) knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">echo =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>Now, we can immediately generate a codebook.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/codebook.html">codebook</a></span>(darktriad, <span class="dt">survey_repetition =</span> <span class="st">"single"</span>,</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">         <span class="dt">metadata_table =</span> knit_by_pkgdown, <span class="dt">metadata_json =</span> knit_by_pkgdown)</a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">knitr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/asis_output">asis_output</a></span>(survey_overview)</a></code></pre></div>
<div id="items" class="section level2">
<h2 class="hasAnchor">
<a href="#items" class="anchor"></a>Items</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">knitr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/asis_output">asis_output</a></span>(<span class="kw">paste0</span>(scales_items, <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\n\n\n</span><span class="st">"</span>, <span class="dt">collapse =</span> <span class="st">"</span><span class="ch">\n\n\n</span><span class="st">"</span>))</a></code></pre></div>
<div id="DG" class="section level3 tabset">
<h3 class="hasAnchor">
<a href="#DG" class="anchor"></a>DG</h3>
<p>dating group</p>
<div id="DG_distribution" class="section level4">
<h4 class="hasAnchor">
<a href="#DG_distribution" class="anchor"></a>Distribution</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">show_missings &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="cf">if</span> (<span class="kw"><a href="../reference/has_label.html">has_label</a></span>(item)) {</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  missings &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item))]</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="kw">attributes</span>(missings) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">    <span class="kw">attributes</span>(missings)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missings)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missings)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">    show_missings &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/tagged_na">na_tag</a></span>(missings))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item)</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_labels">zap_labels</a></span>(item)</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb6-18" data-line-number="18"></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="st">  </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_nomiss, stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">"type"</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="st">    </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_info<span class="op">$</span>type, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">"multiple"</span>)))</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">  ) {</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_split">str_split</a></span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)))</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">}</a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb6-29" data-line-number="29"></a>
<a class="sourceLine" id="cb6-30" data-line-number="30">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.height"</span>)</a>
<a class="sourceLine" id="cb6-31" data-line-number="31">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">"labels"</span>]]</a>
<a class="sourceLine" id="cb6-32" data-line-number="32">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb6-33" data-line-number="33">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb6-34" data-line-number="34"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb6-35" data-line-number="35">  <span class="co"># numeric items are plotted horizontally (because that's what usually expected)</span></a>
<a class="sourceLine" id="cb6-36" data-line-number="36">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb6-37" data-line-number="37"></a>
<a class="sourceLine" id="cb6-38" data-line-number="38">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-39" data-line-number="39"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb6-40" data-line-number="40">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb6-41" data-line-number="41">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb6-42" data-line-number="42">    }</a>
<a class="sourceLine" id="cb6-43" data-line-number="43">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb6-44" data-line-number="44">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb6-45" data-line-number="45">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb6-46" data-line-number="46">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb6-47" data-line-number="47">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb6-48" data-line-number="48">}</a>
<a class="sourceLine" id="cb6-49" data-line-number="49"></a>
<a class="sourceLine" id="cb6-50" data-line-number="50">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.width"</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don't show</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co"># todo: bin rare responses into "other category"</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">"No non-missing values to show."</span>)</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>) {</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">    <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss), <span class="st">" unique, categorical values, so not shown."</span>)</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">}</a></code></pre></div>
<p><img src="codebook_sav_files/figure-html/DG_distribution-1.png" width="700"></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>0 missings.</p>
</div>
<div id="DG_summary" class="section level4">
<h4 class="hasAnchor">
<a href="#DG_summary" class="anchor"></a>Summary statistics</h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw"><a href="../reference/codebook_table.html">codebook_table</a></span>(df))</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">missing</th>
<th align="left">complete</th>
<th align="left">n</th>
<th align="left">mean</th>
<th align="left">sd</th>
<th align="left">p0</th>
<th align="left">p25</th>
<th align="left">p50</th>
<th align="left">p75</th>
<th align="left">p100</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">DG</td>
<td align="left">dating group</td>
<td align="left">numeric</td>
<td align="left">0</td>
<td align="left">90</td>
<td align="left">90</td>
<td align="left">2.03</td>
<td align="left">0.77</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">2</td>
<td align="left">3</td>
<td align="left">3</td>
<td align="left">▆▁▁▇▁▁▁▆</td>
<td align="left">F8.0</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="cf">if</span> (show_missings) {</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(missings, item_name, wrap_at)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">  <span class="co"># don't show choices again, if they're basically same thing as value labels</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10">  pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(item_info)</a>
<a class="sourceLine" id="cb11-11" data-line-number="11">}</a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">    pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">}</a></code></pre></div>
</div>
</div>
<div id="sex" class="section level3 tabset">
<h3 class="hasAnchor">
<a href="#sex" class="anchor"></a>sex</h3>
<p>sex</p>
<div id="sex_distribution" class="section level4">
<h4 class="hasAnchor">
<a href="#sex_distribution" class="anchor"></a>Distribution</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">show_missings &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="cf">if</span> (<span class="kw"><a href="../reference/has_label.html">has_label</a></span>(item)) {</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  missings &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item))]</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">  <span class="kw">attributes</span>(missings) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">    <span class="kw">attributes</span>(missings)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missings)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missings)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb13-10" data-line-number="10">    show_missings &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/tagged_na">na_tag</a></span>(missings))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item)</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_labels">zap_labels</a></span>(item)</a>
<a class="sourceLine" id="cb13-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb13-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb13-18" data-line-number="18"></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb13-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb13-22" data-line-number="22"><span class="st">  </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_nomiss, stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb13-23" data-line-number="23"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">"type"</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-24" data-line-number="24"><span class="st">    </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_info<span class="op">$</span>type, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">"multiple"</span>)))</a>
<a class="sourceLine" id="cb13-25" data-line-number="25">  ) {</a>
<a class="sourceLine" id="cb13-26" data-line-number="26">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_split">str_split</a></span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)))</a>
<a class="sourceLine" id="cb13-27" data-line-number="27">}</a>
<a class="sourceLine" id="cb13-28" data-line-number="28"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb13-29" data-line-number="29"></a>
<a class="sourceLine" id="cb13-30" data-line-number="30">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.height"</span>)</a>
<a class="sourceLine" id="cb13-31" data-line-number="31">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">"labels"</span>]]</a>
<a class="sourceLine" id="cb13-32" data-line-number="32">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb13-33" data-line-number="33">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb13-34" data-line-number="34"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb13-35" data-line-number="35">  <span class="co"># numeric items are plotted horizontally (because that's what usually expected)</span></a>
<a class="sourceLine" id="cb13-36" data-line-number="36">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb13-37" data-line-number="37"></a>
<a class="sourceLine" id="cb13-38" data-line-number="38">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-39" data-line-number="39"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb13-40" data-line-number="40">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb13-41" data-line-number="41">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb13-42" data-line-number="42">    }</a>
<a class="sourceLine" id="cb13-43" data-line-number="43">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb13-44" data-line-number="44">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb13-45" data-line-number="45">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb13-46" data-line-number="46">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb13-47" data-line-number="47">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb13-48" data-line-number="48">}</a>
<a class="sourceLine" id="cb13-49" data-line-number="49"></a>
<a class="sourceLine" id="cb13-50" data-line-number="50">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.width"</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don't show</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co"># todo: bin rare responses into "other category"</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">"No non-missing values to show."</span>)</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>) {</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">    <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss), <span class="st">" unique, categorical values, so not shown."</span>)</a>
<a class="sourceLine" id="cb14-10" data-line-number="10">}</a></code></pre></div>
<p><img src="codebook_sav_files/figure-html/sex_distribution-1.png" width="700"></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>0 missings.</p>
</div>
<div id="sex_summary" class="section level4">
<h4 class="hasAnchor">
<a href="#sex_summary" class="anchor"></a>Summary statistics</h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw"><a href="../reference/codebook_table.html">codebook_table</a></span>(df))</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="left">missing</th>
<th align="left">complete</th>
<th align="left">n</th>
<th align="left">mean</th>
<th align="left">sd</th>
<th align="left">p0</th>
<th align="left">p25</th>
<th align="left">p50</th>
<th align="left">p75</th>
<th align="left">p100</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="right">display_width</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">sex</td>
<td align="left">sex</td>
<td align="left">numeric</td>
<td align="left">1. female,<br>2. male</td>
<td align="left">0</td>
<td align="left">90</td>
<td align="left">90</td>
<td align="left">1.49</td>
<td align="left">0.5</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">2</td>
<td align="left">2</td>
<td align="left">▇▁▁▁▁▁▁▇</td>
<td align="left">F1.0</td>
<td align="right">5</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="cf">if</span> (show_missings) {</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(missings, item_name, wrap_at)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">  <span class="co"># don't show choices again, if they're basically same thing as value labels</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10">  pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(item_info)</a>
<a class="sourceLine" id="cb18-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="sex_labels" class="section level4">
<h4 class="hasAnchor">
<a href="#sex_labels" class="anchor"></a>Value labels</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">    pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li>
<strong>female</strong>: <em>1</em>
</li>
<li>
<strong>male</strong>: <em>2</em>
</li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="relStat" class="section level3 tabset">
<h3 class="hasAnchor">
<a href="#relStat" class="anchor"></a>relStat</h3>
<p>relationship status</p>
<div id="relStat_distribution" class="section level4">
<h4 class="hasAnchor">
<a href="#relStat_distribution" class="anchor"></a>Distribution</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">show_missings &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="cf">if</span> (<span class="kw"><a href="../reference/has_label.html">has_label</a></span>(item)) {</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">  missings &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item))]</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">  <span class="kw">attributes</span>(missings) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">    <span class="kw">attributes</span>(missings)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missings)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missings)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">    show_missings &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/tagged_na">na_tag</a></span>(missings))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item)</a>
<a class="sourceLine" id="cb20-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb20-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_labels">zap_labels</a></span>(item)</a>
<a class="sourceLine" id="cb20-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb20-18" data-line-number="18"></a>
<a class="sourceLine" id="cb20-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb20-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb20-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb20-22" data-line-number="22"><span class="st">  </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_nomiss, stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb20-23" data-line-number="23"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">"type"</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-24" data-line-number="24"><span class="st">    </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_info<span class="op">$</span>type, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">"multiple"</span>)))</a>
<a class="sourceLine" id="cb20-25" data-line-number="25">  ) {</a>
<a class="sourceLine" id="cb20-26" data-line-number="26">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_split">str_split</a></span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)))</a>
<a class="sourceLine" id="cb20-27" data-line-number="27">}</a>
<a class="sourceLine" id="cb20-28" data-line-number="28"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb20-29" data-line-number="29"></a>
<a class="sourceLine" id="cb20-30" data-line-number="30">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.height"</span>)</a>
<a class="sourceLine" id="cb20-31" data-line-number="31">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">"labels"</span>]]</a>
<a class="sourceLine" id="cb20-32" data-line-number="32">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb20-33" data-line-number="33">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb20-34" data-line-number="34"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb20-35" data-line-number="35">  <span class="co"># numeric items are plotted horizontally (because that's what usually expected)</span></a>
<a class="sourceLine" id="cb20-36" data-line-number="36">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb20-37" data-line-number="37"></a>
<a class="sourceLine" id="cb20-38" data-line-number="38">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-39" data-line-number="39"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb20-40" data-line-number="40">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb20-41" data-line-number="41">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb20-42" data-line-number="42">    }</a>
<a class="sourceLine" id="cb20-43" data-line-number="43">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb20-44" data-line-number="44">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb20-45" data-line-number="45">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb20-46" data-line-number="46">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb20-47" data-line-number="47">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb20-48" data-line-number="48">}</a>
<a class="sourceLine" id="cb20-49" data-line-number="49"></a>
<a class="sourceLine" id="cb20-50" data-line-number="50">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.width"</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don't show</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="co"># todo: bin rare responses into "other category"</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">"No non-missing values to show."</span>)</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>) {</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb21-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">    <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss), <span class="st">" unique, categorical values, so not shown."</span>)</a>
<a class="sourceLine" id="cb21-10" data-line-number="10">}</a></code></pre></div>
<p><img src="codebook_sav_files/figure-html/relStat_distribution-1.png" width="700"></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>1 missings.</p>
</div>
<div id="relStat_summary" class="section level4">
<h4 class="hasAnchor">
<a href="#relStat_summary" class="anchor"></a>Summary statistics</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw"><a href="../reference/codebook_table.html">codebook_table</a></span>(df))</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="left">missing</th>
<th align="left">complete</th>
<th align="left">n</th>
<th align="left">mean</th>
<th align="left">sd</th>
<th align="left">p0</th>
<th align="left">p25</th>
<th align="left">p50</th>
<th align="left">p75</th>
<th align="left">p100</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="right">display_width</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">relStat</td>
<td align="left">relationship status</td>
<td align="left">numeric</td>
<td align="left">1. single,<br>2. in a relationship,<br>3. living separately / divorced</td>
<td align="left">1</td>
<td align="left">89</td>
<td align="left">90</td>
<td align="left">1.09</td>
<td align="left">0.32</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">3</td>
<td align="left">▇▁▁▁▁▁▁▁</td>
<td align="left">F8.0</td>
<td align="right">10</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="cf">if</span> (show_missings) {</a>
<a class="sourceLine" id="cb24-2" data-line-number="2">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(missings, item_name, wrap_at)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">  <span class="co"># don't show choices again, if they're basically same thing as value labels</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb25-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb25-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb25-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb25-10" data-line-number="10">  pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(item_info)</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="relStat_labels" class="section level4">
<h4 class="hasAnchor">
<a href="#relStat_labels" class="anchor"></a>Value labels</h4>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">    pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li>
<strong>single</strong>: <em>1</em>
</li>
<li>
<strong>in a relationship</strong>: <em>2</em>
</li>
<li>
<strong>living separately / divorced</strong>: <em>3</em>
</li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="education" class="section level3 tabset">
<h3 class="hasAnchor">
<a href="#education" class="anchor"></a>education</h3>
<p>highest educational attainment</p>
<div id="education_distribution" class="section level4">
<h4 class="hasAnchor">
<a href="#education_distribution" class="anchor"></a>Distribution</h4>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">show_missings &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="cf">if</span> (<span class="kw"><a href="../reference/has_label.html">has_label</a></span>(item)) {</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">  missings &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item))]</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">  <span class="kw">attributes</span>(missings) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">    <span class="kw">attributes</span>(missings)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missings)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missings)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb27-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb27-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb27-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb27-10" data-line-number="10">    show_missings &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/tagged_na">na_tag</a></span>(missings))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb27-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item)</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_labels">zap_labels</a></span>(item)</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb27-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb27-18" data-line-number="18"></a>
<a class="sourceLine" id="cb27-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb27-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb27-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb27-22" data-line-number="22"><span class="st">  </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_nomiss, stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb27-23" data-line-number="23"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">"type"</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-24" data-line-number="24"><span class="st">    </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_info<span class="op">$</span>type, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">"multiple"</span>)))</a>
<a class="sourceLine" id="cb27-25" data-line-number="25">  ) {</a>
<a class="sourceLine" id="cb27-26" data-line-number="26">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_split">str_split</a></span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)))</a>
<a class="sourceLine" id="cb27-27" data-line-number="27">}</a>
<a class="sourceLine" id="cb27-28" data-line-number="28"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb27-29" data-line-number="29"></a>
<a class="sourceLine" id="cb27-30" data-line-number="30">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.height"</span>)</a>
<a class="sourceLine" id="cb27-31" data-line-number="31">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">"labels"</span>]]</a>
<a class="sourceLine" id="cb27-32" data-line-number="32">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb27-33" data-line-number="33">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb27-34" data-line-number="34"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb27-35" data-line-number="35">  <span class="co"># numeric items are plotted horizontally (because that's what usually expected)</span></a>
<a class="sourceLine" id="cb27-36" data-line-number="36">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb27-37" data-line-number="37"></a>
<a class="sourceLine" id="cb27-38" data-line-number="38">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-39" data-line-number="39"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb27-40" data-line-number="40">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb27-41" data-line-number="41">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb27-42" data-line-number="42">    }</a>
<a class="sourceLine" id="cb27-43" data-line-number="43">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb27-44" data-line-number="44">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb27-45" data-line-number="45">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb27-46" data-line-number="46">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb27-47" data-line-number="47">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb27-48" data-line-number="48">}</a>
<a class="sourceLine" id="cb27-49" data-line-number="49"></a>
<a class="sourceLine" id="cb27-50" data-line-number="50">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.width"</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don't show</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="co"># todo: bin rare responses into "other category"</span></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb28-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">"No non-missing values to show."</span>)</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>) {</a>
<a class="sourceLine" id="cb28-7" data-line-number="7">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb28-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb28-9" data-line-number="9">    <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss), <span class="st">" unique, categorical values, so not shown."</span>)</a>
<a class="sourceLine" id="cb28-10" data-line-number="10">}</a></code></pre></div>
<p><img src="codebook_sav_files/figure-html/education_distribution-1.png" width="700"></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>1 missings.</p>
</div>
<div id="education_summary" class="section level4">
<h4 class="hasAnchor">
<a href="#education_summary" class="anchor"></a>Summary statistics</h4>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb30-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw"><a href="../reference/codebook_table.html">codebook_table</a></span>(df))</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="left">missing</th>
<th align="left">complete</th>
<th align="left">n</th>
<th align="left">mean</th>
<th align="left">sd</th>
<th align="left">p0</th>
<th align="left">p25</th>
<th align="left">p50</th>
<th align="left">p75</th>
<th align="left">p100</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="right">display_width</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">education</td>
<td align="left">highest educational attainment</td>
<td align="left">numeric</td>
<td align="left">1. nine years schooling only,<br>2. professional training,<br>3. vocational school,<br>4. university-entrance diploma,<br>5. academic degree</td>
<td align="left">1</td>
<td align="left">89</td>
<td align="left">90</td>
<td align="left">4.17</td>
<td align="left">0.38</td>
<td align="left">4</td>
<td align="left">4</td>
<td align="left">4</td>
<td align="left">4</td>
<td align="left">5</td>
<td align="left">▇▁▁▁▁▁▁▂</td>
<td align="left">F1.0</td>
<td align="right">5</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="cf">if</span> (show_missings) {</a>
<a class="sourceLine" id="cb31-2" data-line-number="2">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(missings, item_name, wrap_at)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">  <span class="co"># don't show choices again, if they're basically same thing as value labels</span></a>
<a class="sourceLine" id="cb32-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb32-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb32-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb32-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb32-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb32-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb32-10" data-line-number="10">  pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(item_info)</a>
<a class="sourceLine" id="cb32-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="education_labels" class="section level4">
<h4 class="hasAnchor">
<a href="#education_labels" class="anchor"></a>Value labels</h4>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb33-2" data-line-number="2">    pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb33-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li>
<strong>nine years schooling only</strong>: <em>1</em>
</li>
<li>
<strong>professional training</strong>: <em>2</em>
</li>
<li>
<strong>vocational school</strong>: <em>3</em>
</li>
<li>
<strong>university-entrance diploma</strong>: <em>4</em>
</li>
<li>
<strong>academic degree</strong>: <em>5</em>
</li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="NPI_avg" class="section level3 tabset">
<h3 class="hasAnchor">
<a href="#NPI_avg" class="anchor"></a>NPI_avg</h3>
<p>narcissistic personality inventory - average</p>
<div id="NPI_avg_distribution" class="section level4">
<h4 class="hasAnchor">
<a href="#NPI_avg_distribution" class="anchor"></a>Distribution</h4>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">show_missings &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="cf">if</span> (<span class="kw"><a href="../reference/has_label.html">has_label</a></span>(item)) {</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">  missings &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item))]</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">  <span class="kw">attributes</span>(missings) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb34-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb34-6" data-line-number="6">    <span class="kw">attributes</span>(missings)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missings)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missings)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb34-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb34-10" data-line-number="10">    show_missings &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/tagged_na">na_tag</a></span>(missings))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb34-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_missing">zap_missing</a></span>(item)</a>
<a class="sourceLine" id="cb34-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb34-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb34-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/haven/topics/zap_labels">zap_labels</a></span>(item)</a>
<a class="sourceLine" id="cb34-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb34-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb34-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb34-18" data-line-number="18"></a>
<a class="sourceLine" id="cb34-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb34-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb34-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb34-22" data-line-number="22"><span class="st">  </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_nomiss, stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb34-23" data-line-number="23"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">"type"</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-24" data-line-number="24"><span class="st">    </span>stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_detect">str_detect</a></span>(item_info<span class="op">$</span>type, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">"multiple"</span>)))</a>
<a class="sourceLine" id="cb34-25" data-line-number="25">  ) {</a>
<a class="sourceLine" id="cb34-26" data-line-number="26">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/str_split">str_split</a></span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stringr/topics/modifiers">fixed</a></span>(<span class="st">", "</span>)))</a>
<a class="sourceLine" id="cb34-27" data-line-number="27">}</a>
<a class="sourceLine" id="cb34-28" data-line-number="28"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb34-29" data-line-number="29"></a>
<a class="sourceLine" id="cb34-30" data-line-number="30">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.height"</span>)</a>
<a class="sourceLine" id="cb34-31" data-line-number="31">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">"labels"</span>]]</a>
<a class="sourceLine" id="cb34-32" data-line-number="32">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb34-33" data-line-number="33">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb34-34" data-line-number="34"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb34-35" data-line-number="35">  <span class="co"># numeric items are plotted horizontally (because that's what usually expected)</span></a>
<a class="sourceLine" id="cb34-36" data-line-number="36">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb34-37" data-line-number="37"></a>
<a class="sourceLine" id="cb34-38" data-line-number="38">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-39" data-line-number="39"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb34-40" data-line-number="40">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb34-41" data-line-number="41">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb34-42" data-line-number="42">    }</a>
<a class="sourceLine" id="cb34-43" data-line-number="43">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb34-44" data-line-number="44">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb34-45" data-line-number="45">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb34-46" data-line-number="46">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb34-47" data-line-number="47">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb34-48" data-line-number="48">}</a>
<a class="sourceLine" id="cb34-49" data-line-number="49"></a>
<a class="sourceLine" id="cb34-50" data-line-number="50">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">"fig.width"</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don't show</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="co"># todo: bin rare responses into "other category"</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb35-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">"No non-missing values to show."</span>)</a>
<a class="sourceLine" id="cb35-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">is.numeric</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss) <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>) {</a>
<a class="sourceLine" id="cb35-7" data-line-number="7">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb35-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb35-9" data-line-number="9">    <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(item_nomiss), <span class="st">" unique, categorical values, so not shown."</span>)</a>
<a class="sourceLine" id="cb35-10" data-line-number="10">}</a></code></pre></div>
<p><img src="codebook_sav_files/figure-html/NPI_avg_distribution-1.png" width="700"></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>0 missings.</p>
</div>
<div id="NPI_avg_summary" class="section level4">
<h4 class="hasAnchor">
<a href="#NPI_avg_summary" class="anchor"></a>Summary statistics</h4>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb37-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw"><a href="../reference/codebook_table.html">codebook_table</a></span>(df))</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">missing</th>
<th align="left">complete</th>
<th align="left">n</th>
<th align="left">mean</th>
<th align="left">sd</th>
<th align="left">p0</th>
<th align="left">p25</th>
<th align="left">p50</th>
<th align="left">p75</th>
<th align="left">p100</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="right">display_width</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">NPI_avg</td>
<td align="left">narcissistic personality inventory - average</td>
<td align="left">numeric</td>
<td align="left">0</td>
<td align="left">90</td>
<td align="left">90</td>
<td align="left">2.61</td>
<td align="left">0.35</td>
<td align="left">1.7</td>
<td align="left">2.42</td>
<td align="left">2.6</td>
<td align="left">2.82</td>
<td align="left">3.65</td>
<td align="left">▁▂▃▇▆▂▁▁</td>
<td align="left">F8.2</td>
<td align="right">10</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="cf">if</span> (show_missings) {</a>
<a class="sourceLine" id="cb38-2" data-line-number="2">  <span class="kw"><a href="../reference/plot_labelled.html">plot_labelled</a></span>(missings, item_name, wrap_at)</a>
<a class="sourceLine" id="cb38-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb39-2" data-line-number="2">  <span class="co"># don't show choices again, if they're basically same thing as value labels</span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb39-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb39-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb39-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb39-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb39-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb39-10" data-line-number="10">  pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(item_info)</a>
<a class="sourceLine" id="cb39-11" data-line-number="11">}</a></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb40-2" data-line-number="2">    pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">missingness_report</a></code></pre></div>
</div>
</div>
</div>
<div id="missingness-report" class="section level2">
<h2 class="hasAnchor">
<a href="#missingness-report" class="anchor"></a>Missingness report</h2>
<p>Among those who finished the survey. Only variables that have missings are shown.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="cf">if</span> (  <span class="kw">exists</span>(<span class="st">"ended"</span>, results) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="st">  </span><span class="kw">exists</span>(<span class="st">"expired"</span>, results)) {</a>
<a class="sourceLine" id="cb42-3" data-line-number="3">  finisher_results &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(results, <span class="op">!</span><span class="kw">is.na</span>(.data<span class="op">$</span>ended))</a>
<a class="sourceLine" id="cb42-4" data-line-number="4">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb42-5" data-line-number="5">  finisher_results &lt;-<span class="st"> </span>results</a>
<a class="sourceLine" id="cb42-6" data-line-number="6">  <span class="kw">warning</span>(<span class="st">"Could not figure out who finished the surveys, because the "</span>,</a>
<a class="sourceLine" id="cb42-7" data-line-number="7">          <span class="st">"variables expired and ended were missing."</span>)</a>
<a class="sourceLine" id="cb42-8" data-line-number="8">}</a></code></pre></div>
<pre><code>## Warning: Could not figure out who finished the surveys, because the
## variables expired and ended were missing.</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="cf">if</span> (<span class="kw">length</span>(md_pattern)) {</a>
<a class="sourceLine" id="cb44-2" data-line-number="2">  pander<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/pander/topics/pander">pander</a></span>(md_pattern)</a>
<a class="sourceLine" id="cb44-3" data-line-number="3">}</a></code></pre></div>
<table style="width:93%;" class="table">
<colgroup>
<col width="36%">
<col width="13%">
<col width="16%">
<col width="15%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="center">description</th>
<th align="center">relStat</th>
<th align="center">education</th>
<th align="center">var_miss</th>
<th align="center">n_miss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Missings in 0 variables</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">88</td>
</tr>
<tr class="even">
<td align="center">Missings per variable</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">Missings in 1 variables</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">Missings in 1 variables</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">items</a></code></pre></div>
</div>
<div id="codebook-table" class="section level2">
<h2 class="hasAnchor">
<a href="#codebook-table" class="anchor"></a>Codebook table</h2>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">export_table</span>(metadata_table)</a></code></pre></div>
<div id="htmlwidget-31b993b4896ffe513cd0" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-31b993b4896ffe513cd0">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"5\" data-max=\"10\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"data":[["<a href=\"#DG\">DG<\/a>","<a href=\"#sex\">sex<\/a>","<a href=\"#relStat\">relStat<\/a>","<a href=\"#education\">education<\/a>","<a href=\"#NPI_avg\">NPI_avg<\/a>"],["dating group","sex","relationship status","highest educational attainment","narcissistic personality inventory - average"],["numeric","numeric","numeric","numeric","numeric"],[null,"1. female,<br>2. male","1. single,<br>2. in a relationship,<br>3. living separately / divorced","1. nine years schooling only,<br>2. professional training,<br>3. vocational school,<br>4. university-entrance diploma,<br>5. academic degree",null],["0","0","1","1","0"],["90","90","89","89","90"],["90","90","90","90","90"],["2.03","1.49","1.09","4.17","2.61"],["0.77","0.5 ","0.32","0.38","0.35"],["1  ","1  ","1  ","4  ","1.7"],["1   ","1   ","1   ","4   ","2.42"],["2  ","1  ","1  ","4  ","2.6"],["3   ","2   ","1   ","4   ","2.82"],["3   ","2   ","3   ","5   ","3.65"],["▆▁▁▇▁▁▁▆","▇▁▁▁▁▁▁▇","▇▁▁▁▁▁▁▁","▇▁▁▁▁▁▁▂","▁▂▃▇▆▂▁▁"],["F8.0","F1.0","F8.0","F1.0","F8.2"],[null,5,10,5,10]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>name<\/th>\n      <th>label<\/th>\n      <th>data_type<\/th>\n      <th>value_labels<\/th>\n      <th>missing<\/th>\n      <th>complete<\/th>\n      <th>n<\/th>\n      <th>mean<\/th>\n      <th>sd<\/th>\n      <th>p0<\/th>\n      <th>p25<\/th>\n      <th>p50<\/th>\n      <th>p75<\/th>\n      <th>p100<\/th>\n      <th>hist<\/th>\n      <th>format.spss<\/th>\n      <th>display_width<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","csv","excel","pdf","print"],"pageLength":200,"columnDefs":[{"className":"dt-right","targets":16}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,25,50,100,200]}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">jsonld</a></code></pre></div>
<script type="application/ld+json">
{
  "name": "results",
  "keywords": ["DG", "sex", "relStat", "education", "NPI_avg"],
  "variableMeasured": [
    {
      "format.spss": "F8.0",
      "name": "DG",
      "description": "dating group",
      "data_summary": [
        {
          "missing": "0",
          "complete": "90",
          "n": "90",
          "mean": "2.03",
          "sd": "0.77",
          "p0": "1",
          "p25": "1",
          "p50": "2",
          "p75": "3",
          "p100": "3",
          "hist": "▆▁▁▇▁▁▁▆",
          "@type": "http://formr.org/codebook/SummaryStatistics"
        }
      ],
      "value": "Number",
      "@context": {
        "@vocab": "http://pending.schema.org/"
      },
      "@type": "propertyValue"
    },
    {
      "format.spss": "F1.0",
      "display_width": 5,
      "name": "sex",
      "description": "sex",
      "value": {
        "female": 1,
        "male": 2
      },
      "maxValue": 2,
      "minValue": 1,
      "data_summary": [
        {
          "missing": "0",
          "complete": "90",
          "n": "90",
          "mean": "1.49",
          "sd": "0.5",
          "p0": "1",
          "p25": "1",
          "p50": "1",
          "p75": "2",
          "p100": "2",
          "hist": "▇▁▁▁▁▁▁▇",
          "@type": "http://formr.org/codebook/SummaryStatistics"
        }
      ],
      "@context": {
        "@vocab": "http://pending.schema.org/"
      },
      "@type": "propertyValue"
    },
    {
      "format.spss": "F8.0",
      "display_width": 10,
      "name": "relStat",
      "description": "relationship status",
      "value": {
        "single": 1,
        "in a relationship": 2,
        "living separately / divorced": 3
      },
      "maxValue": 3,
      "minValue": 1,
      "data_summary": [
        {
          "missing": "1",
          "complete": "89",
          "n": "90",
          "mean": "1.09",
          "sd": "0.32",
          "p0": "1",
          "p25": "1",
          "p50": "1",
          "p75": "1",
          "p100": "3",
          "hist": "▇▁▁▁▁▁▁▁",
          "@type": "http://formr.org/codebook/SummaryStatistics"
        }
      ],
      "@context": {
        "@vocab": "http://pending.schema.org/"
      },
      "@type": "propertyValue"
    },
    {
      "format.spss": "F1.0",
      "display_width": 5,
      "name": "education",
      "description": "highest educational attainment",
      "value": {
        "nine years schooling only": 1,
        "professional training": 2,
        "vocational school": 3,
        "university-entrance diploma": 4,
        "academic degree": 5
      },
      "maxValue": 5,
      "minValue": 1,
      "data_summary": [
        {
          "missing": "1",
          "complete": "89",
          "n": "90",
          "mean": "4.17",
          "sd": "0.38",
          "p0": "4",
          "p25": "4",
          "p50": "4",
          "p75": "4",
          "p100": "5",
          "hist": "▇▁▁▁▁▁▁▂",
          "@type": "http://formr.org/codebook/SummaryStatistics"
        }
      ],
      "@context": {
        "@vocab": "http://pending.schema.org/"
      },
      "@type": "propertyValue"
    },
    {
      "format.spss": "F8.2",
      "display_width": 10,
      "name": "NPI_avg",
      "description": "narcissistic personality inventory - average",
      "data_summary": [
        {
          "missing": "0",
          "complete": "90",
          "n": "90",
          "mean": "2.61",
          "sd": "0.35",
          "p0": "1.7",
          "p25": "2.42",
          "p50": "2.6",
          "p75": "2.82",
          "p100": "3.65",
          "hist": "▁▂▃▇▆▂▁▁",
          "@type": "http://formr.org/codebook/SummaryStatistics"
        }
      ],
      "value": "Number",
      "@context": {
        "@vocab": "http://pending.schema.org/"
      },
      "@type": "propertyValue"
    }
  ],
  "@context": "http://schema.org/",
  "@type": "Dataset"
}
</script><div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span>knit_by_pkgdown) {</a>
<a class="sourceLine" id="cb48-2" data-line-number="2">  codebook<span class="op">:::</span><span class="kw">escaped_table</span>(<span class="kw"><a href="../reference/codebook_table.html">codebook_table</a></span>(darktriad))</a>
<a class="sourceLine" id="cb48-3" data-line-number="3">}</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#items">Items</a></li>
      <li><a href="#missingness-report">Missingness report</a></li>
      <li><a href="#codebook-table">Codebook table</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ruben Arslan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '0849aaec03e613204f45e1d6da8cff64',
    indexName: 'rubenarslan',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
